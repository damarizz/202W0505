---
import Layout from "@layouts/Layout.astro";
import Header from '@components/Header.astro';
import Link from '@components/Link.astro';
import AvailableAtGithub from '@components/AvailableAtGithub.astro';
import { PROJECT_NAME, REPO_URL } from "src/constants";
import { ensureUrlReturns200 } from "src/utils";

type Props = {
  main_id: string,
  h1_title: string,
  n_week: number
}

const { main_id, n_week, h1_title } = Astro.props;

const GITHUB_URL = `${REPO_URL}/tree/main/site/src/pages/weeks/${n_week}.astro`;

if (import.meta.env.PROD) {
  // Runs on `astro build`
  ensureUrlReturns200(GITHUB_URL);
}
---

<Layout title={`Assignments: project ${n_week}`}>
  <Header />
  <main>
    <Link href="/">Go back</Link>
    <section>
      <h1>{h1_title}</h1>
      <AvailableAtGithub href={GITHUB_URL}>
        @paoloose/{PROJECT_NAME}/{n_week}
      </AvailableAtGithub>
    </section>
    <section id={main_id}>
      <slot />
    </section>
  </main>
</Layout>

<style lang="scss">
  h1 {
    margin-top: 10px;
    margin-bottom: 0.5rem;
  }
  html {
    scrollbar-gutter: stable;
  }

  main {
    margin: 0 auto;
    padding: 3rem 1.5rem;
    max-width: 100ch;
  }

  section {
  }

  svg {
    display: none;
  }
</style>
